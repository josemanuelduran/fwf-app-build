{"version":3,"sources":["../../src/app/pages/profile/profile.component.module.ts","../../src/app/pages/profile/profile.component.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nimport { ProfilePageComponent } from './profile.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ProfilePageComponent,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ProfilePageComponent),\r\n    TranslateModule\r\n  ],\r\n})\r\nexport class ProfilePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/profile/profile.component.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ModalController, AlertController } from 'ionic-angular';\r\n\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport { Player, User, Profile } from '../../models';\r\nimport { ContextService, MessagesService, ProfileService } from '../../providers';\r\nimport { EditProfileComponent } from '../../components/edit-profile/edit-profile.component';\r\n\r\n@IonicPage({\r\n    name: 'ProfilePage',\r\n    segment: 'profile'\r\n})\r\n@Component({\r\n    selector: 'fwf-page-profile',\r\n    templateUrl: 'profile.component.html',\r\n})\r\nexport class ProfilePageComponent {\r\n\r\n    profile: Profile;\r\n\r\n    constructor(\r\n        public navCtrl: NavController,\r\n        public navParams: NavParams,\r\n        private translate: TranslateService,\r\n        private context: ContextService,\r\n        private modalCtrl: ModalController,\r\n        private messages: MessagesService,\r\n        private alertCtrl: AlertController,\r\n        private profileService: ProfileService,\r\n    ) {\r\n        this.loadProfile();\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n    }\r\n\r\n    editProfile(): void {\r\n        let dialog =\r\n            this.modalCtrl.create(EditProfileComponent, {profile: this.profile}, {enableBackdropDismiss: false});\r\n        dialog.onDidDismiss((newProfile: Profile) => {\r\n            if (newProfile) {\r\n                this.context.setPlayerLogged(newProfile.player);\r\n                this.context.setUserLogged(newProfile.user);\r\n                this.messages.showSuccess('ACTION_OK', 'CONFIRMATION');\r\n                this.loadProfile();\r\n            }\r\n        });\r\n        dialog.present();\r\n    }\r\n\r\n    loadProfile(): void {\r\n        const userLogged: User = this.context.getUserLogged();\r\n        const playerLogged: Player = this.context.getPlayerLogged();\r\n        this.profile = {\r\n            player: playerLogged,\r\n            user: userLogged,\r\n            fullName: userLogged.fullName,\r\n            alias: playerLogged.alias,\r\n            email: playerLogged.email,\r\n            phoneNumber: playerLogged.phoneNumber,\r\n            fixed: playerLogged.fixed,\r\n            username: userLogged.username\r\n        };\r\n    }\r\n\r\n    changePassword(): void {\r\n        let alert = this.alertCtrl.create({\r\n            title: this.translate.instant('PROFILE_PAGE.CHANGE_PASSWORD'),\r\n            inputs: [\r\n              {\r\n                name: 'currentPassword',\r\n                placeholder: this.translate.instant('PROFILE_PAGE.CURRENT_PASSWORD'),\r\n                type: 'password'\r\n              },\r\n              {\r\n                name: 'newPassword1',\r\n                placeholder: this.translate.instant('PROFILE_PAGE.NEW_PASSWORD'),\r\n                type: 'password'\r\n              },\r\n              {\r\n                name: 'newPassword2',\r\n                placeholder: this.translate.instant('PROFILE_PAGE.REPIT_PASSWORD'),\r\n                type: 'password'\r\n              }\r\n            ],\r\n            buttons: [\r\n              {\r\n                text: this.translate.instant('CANCEL_BUTTON'),\r\n                role: 'cancel',\r\n                handler: data => {\r\n                }\r\n              },\r\n              {\r\n                text: this.translate.instant('SAVE_BUTTON'),\r\n                handler: data => {\r\n                    if (data.newPassword1 === data.newPassword2) {\r\n                        this.profileService.changePassword(\r\n                                this.context.getUserLogged().id,\r\n                                data.currentPassword,\r\n                                data.newPassword1)\r\n                            .subscribe(\r\n                                res => this.messages.showSuccess('ACTION_OK', 'CONFIRMATION'),\r\n                                error => this.messages.showError(error, 'PROFILE_PAGE.ERROR_CHANGE_PASSWORD')\r\n                            );\r\n                    } else {\r\n                        this.messages.showError('PROFILE_PAGE.BAD_NEW_PASSWORD_EXPLANATION', 'PROFILE_PAGE.BAD_NEW_PASSWORD');\r\n                    }\r\n                }\r\n              }\r\n            ]\r\n          });\r\n          alert.present();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/profile/profile.component.ts"],"sourceRoot":""}