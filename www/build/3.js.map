{"version":3,"sources":["../../src/app/pages/valuations/valuations.component.module.ts","../../src/app/pages/valuations/valuations.component.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { ValuationsPageComponent } from './valuations.component';\n\n@NgModule({\n    declarations: [\n        ValuationsPageComponent,\n    ],\n    imports: [\n        IonicPageModule.forChild(ValuationsPageComponent),\n        TranslateModule\n    ],\n})\nexport class CallUpPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/valuations/valuations.component.module.ts","import { Component, OnInit } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\nimport { Match, Player, MatchScore, Score } from '../../models';\nimport { ValuationsService, MessagesService } from '../../providers';\n\n@IonicPage({\n    name: 'ValuationsPage'\n})\n@Component({\n  selector: 'fwf-page-valuations',\n  templateUrl: 'valuations.component.html',\n})\nexport class ValuationsPageComponent implements OnInit {\n\n    match: Match;\n    matchScore: MatchScore;\n    playerConnected: Player;\n\n    constructor(\n            public navCtrl: NavController,\n            public navParams: NavParams,\n            private valuationsService: ValuationsService,\n            private messages: MessagesService\n    ) { }\n\n    ngOnInit() {\n        this.match = this.navParams.get('match');\n        this.playerConnected = this.navParams.get('player');\n        this.loadScores();\n    }\n\n    saveScores(): void {\n        this.matchScore.date = new Date();\n        if (this.matchScore.id) {\n            this.valuationsService.updateMatchScore(this.matchScore)\n                .subscribe(\n                    data => {\n                        this.messages.showSuccess('ACTION_OK', 'CONFIRMATION');\n                        this.navCtrl.pop();\n                    },\n                    error => this.messages.showError(error)\n                );\n        } else {\n            this.valuationsService.createMatchScore(this.matchScore)\n                .subscribe(\n                    data => {\n                        this.messages.showSuccess('ACTION_OK', 'CONFIRMATION');\n                        this.navCtrl.pop();\n                    },\n                    error => this.messages.showError(error)\n                );\n        }\n    }\n\n    private loadScores(): void {\n        this.valuationsService.fetchMatchScores(this.match.id, this.playerConnected.id)\n            .subscribe(\n                data => {\n                    if (!data) {\n                        this.createNewScores();\n                    } else {\n                        this.matchScore = data;\n                    }\n                },\n                error => this.messages.showError(error)\n            );\n    }\n\n    private createNewScores(): void {\n        this.matchScore = {\n            matchId: this.match.id,\n            playerId: this.playerConnected.id,\n            scores: []\n        };\n        this.match.callUp.forEach(item => {\n            if (item.player.id !== this.playerConnected.id) {\n                let score: Score = {\n                    namePlayer: item.player.name,\n                    idPlayer: item.player.id\n                };\n                this.matchScore.scores.push(score);\n            }\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/valuations/valuations.component.ts"],"sourceRoot":""}