{"version":3,"sources":["../../src/app/pages/login/login.component.module.ts","../../src/app/pages/login/services/login.service.ts","../../src/app/pages/login/login.component.ts","../../src/app/pages/login/login-form/login-form.component.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nimport { LoginPageComponent } from './login.component';\r\nimport { LoginFormComponent } from './login-form/login-form.component';\r\nimport { LoginService } from './services/login.service';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LoginPageComponent,\r\n    LoginFormComponent,\r\n  ],\r\n  entryComponents: [],\r\n  imports: [\r\n    IonicPageModule.forChild(LoginPageComponent),\r\n    TranslateModule,\r\n  ],\r\n  providers: [\r\n      LoginService\r\n  ]\r\n})\r\nexport class LoginPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/login/login.component.module.ts","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\nimport { Observable } from 'rxjs/Observable';\r\n\r\nimport { HTTP_HEADERS, User } from '../../../models';\r\n\r\n@Injectable()\r\nexport class LoginService {\r\n\r\n    constructor(private http: HttpClient) { }\r\n\r\n    login(username: string, password: string): Observable<User> {\r\n        let {url, headers} = this.requestParametersForLogin(username, password);\r\n        return this.http.get<User>(url, {headers: headers});\r\n\r\n    }\r\n\r\n    private requestParametersForLogin(username: string, password: string): {url: string, headers: HttpHeaders} {\r\n        let url = 'login/';\r\n        const headers: HttpHeaders = new HttpHeaders({\r\n            [HTTP_HEADERS.AUTHORIZATION]: HTTP_HEADERS.BASIC_PREFIX + ' ' + btoa(username + ':' + password),\r\n            [HTTP_HEADERS.CONTENT_TYPE]: 'application/x-www-form-urlencoded'\r\n        });\r\n        return {url, headers};\r\n    }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/login/services/login.service.ts","import { Component, OnInit } from '@angular/core';\r\nimport { IonicPage, App  } from 'ionic-angular';\r\n\r\nimport { Authenticate, Role } from '../../models';\r\nimport { GlobalService, ContextService, PlayersService, MessagesService } from '../../providers';\r\nimport { LoginService } from './services/login.service';\r\n\r\n@IonicPage({\r\n    name: 'LoginPage',\r\n    segment: 'login'\r\n})\r\n@Component({\r\n  selector: 'fwf-page-login',\r\n  templateUrl: 'login.component.html',\r\n})\r\nexport class LoginPageComponent implements OnInit {\r\n\r\n    constructor(\r\n      private global: GlobalService,\r\n      private loginService: LoginService,\r\n      private app: App,\r\n      private context: ContextService,\r\n      private playersService: PlayersService,\r\n      private messages: MessagesService,\r\n    ) { }\r\n\r\n    ngOnInit() {\r\n        this.global.enableSideMenu(false);\r\n    }\r\n\r\n    ionViewDidLoad() {}\r\n\r\n    onSubmit($event: Authenticate): void {\r\n        this.loginService.login($event.username, $event.password)\r\n            .subscribe(\r\n                user => {\r\n                    user = {\r\n                        ...user,\r\n                        roles: user.roles.map(rol => (<any>Role)[rol]),\r\n                        active: true\r\n                    };\r\n                    this.context.setUserLogged(user);\r\n                    if (user.playerId) {\r\n                        this.playersService.getPlayer(user.playerId)\r\n                            .subscribe(\r\n                                player => {\r\n                                    this.context.setPlayerLogged(player);\r\n                                    this.app.getActiveNav().setRoot('TabsController');\r\n                                },\r\n                                error => this.messages.showError('LOGIN.ERROR_LOGIN_MSG', 'LOGIN.ERROR_LOGIN_TITLE')\r\n                            );\r\n                    }\r\n                },\r\n                err => this.messages.showError('LOGIN.ERROR_LOGIN_MSG', 'LOGIN.ERROR_LOGIN_TITLE')\r\n            );\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/login/login.component.ts","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\n\r\nimport { Authenticate } from '../../../models';\r\n\r\n@Component({\r\n    selector: 'fwf-login-form',\r\n    templateUrl: 'login-form.component.html'\r\n})\r\nexport class LoginFormComponent implements OnInit {\r\n\r\n    @Output() submitted = new EventEmitter<Authenticate>();\r\n\r\n    loginForm: FormGroup;\r\n    wasSubmitted = false;\r\n\r\n    constructor(\r\n        private formBuilder: FormBuilder,\r\n    ) { }\r\n\r\n    /**\r\n     * Enable login button for submission.\r\n     * @returns {boolean} Indicator if form is ready for submission.\r\n     */\r\n    get canLogin(): boolean {\r\n        return (!this.wasSubmitted && this.loginForm.invalid && !this.loginForm.touched)\r\n            || (!this.loginForm.invalid && this.loginForm.touched);\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.loginForm = this.formBuilder.group({\r\n            username: ['', Validators.required],\r\n            password: ['', Validators.required]\r\n        });\r\n    }\r\n\r\n    submit() {\r\n        if (this.loginForm.valid) {\r\n            this.submitted.emit(this.loginForm.value);\r\n        }\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/login/login-form/login-form.component.ts"],"sourceRoot":""}